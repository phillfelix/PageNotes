(function(e,p,q){function r(d,c,b){var g=d.runtimeStyle&&d.runtimeStyle[c],k,n=d.style;!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(b)&&/^-?\d/.test(b)&&(k=n.left,g&&(d.runtimeStyle.left=d.currentStyle.left),n.left="fontSize"===c?"1em":b||0,b=n.pixelLeft+"px",n.left=k,g&&(d.runtimeStyle.left=g));return/^(thin|medium|thick)$/i.test(b)?b:Math.round(parseFloat(b))+"px"}function A(d){return parseInt(d,10)}function F(d,c,b,g,k,n){c=h.Util.getCSS(c,d,k);var a;1===c.length&&(k=c[0],c=[],c[0]=k,c[1]=k);-1!==c[0].toString().indexOf("%")?
(a=parseFloat(c[0])/100,k=b.width*a,"backgroundSize"!==d&&(k-=(n||g).width*a)):k="backgroundSize"===d?"auto"===c[0]?g.width:/contain|cover/.test(c[0])?h.Util.resizeBounds(g.width,g.height,b.width,b.height,c[0]).width:parseInt(c[0],10):parseInt(c[0],10);"auto"===c[1]?b=k/g.width*g.height:-1!==c[1].toString().indexOf("%")?(a=parseFloat(c[1])/100,b=b.height*a,"backgroundSize"!==d&&(b-=(n||g).height*a)):b=parseInt(c[1],10);return[k,b]}function W(d,c){var b=[];return{storage:b,width:d,height:c,clip:function(){b.push({type:"function",
name:"clip",arguments:arguments})},translate:function(){b.push({type:"function",name:"translate",arguments:arguments})},fill:function(){b.push({type:"function",name:"fill",arguments:arguments})},save:function(){b.push({type:"function",name:"save",arguments:arguments})},restore:function(){b.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){b.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){b.push({type:"function",name:"createPattern",
arguments:arguments})},drawShape:function(){var d=[];b.push({type:"function",name:"drawShape",arguments:d});return{moveTo:function(){d.push({name:"moveTo",arguments:arguments})},lineTo:function(){d.push({name:"lineTo",arguments:arguments})},arcTo:function(){d.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){d.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){d.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){b.push({type:"function",
name:"drawImage",arguments:arguments})},fillText:function(){b.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(d,c){b.push({type:"variable",name:d,arguments:c});return c}}}var h={},L;h.Util={};h.Util.log=function(d){h.logging&&e.console&&e.console.log&&e.console.log(d)};h.Util.trimText=function(d){return function(c){return d?d.apply(c):((c||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim);h.Util.asFloat=function(d){return parseFloat(d)};(function(){var d=
/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,c=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;h.Util.parseTextShadows=function(b){if(!b||"none"===b)return[];b=b.match(d);for(var g=[],k=0;b&&k<b.length;k++){var n=b[k].match(c);g.push({color:n[0],offsetX:n[1]?n[1].replace("px",""):0,offsetY:n[2]?n[2].replace("px",""):0,blur:n[3]?n[3].replace("px",""):0})}return g}})();h.Util.parseBackgroundImage=function(d){var c,b,g,k,n,a=[],v,f=0,e=0,h,p,l=function(){c&&('"'===b.substr(0,1)&&(b=b.substr(1,b.length-2)),b&&
p.push(b),"-"===c.substr(0,1)&&0<(k=c.indexOf("-",1)+1)&&(g=c.substr(0,k),c=c.substr(k)),a.push({prefix:g,method:c.toLowerCase(),value:n,args:p}));p=[];c=g=b=n=""};l();for(var q=0,r=d.length;q<r;q++)if(v=d[q],!(0===f&&-1<" \r\n\t".indexOf(v))){switch(v){case '"':h?h===v&&(h=null):h=v;break;case "(":if(h)break;else if(0===f){f=1;n+=v;continue}else e++;break;case ")":if(h)break;else if(1===f)if(0===e){f=0;n+=v;l();continue}else e--;break;case ",":if(!h)if(0===f){l();continue}else if(1===f&&0===e&&!c.match(/^url$/i)){p.push(b);
b="";n+=v;continue}}n+=v;0===f?c+=v:b+=v}l();return a};h.Util.Bounds=function(d){var c,b={};d.getBoundingClientRect&&(c=d.getBoundingClientRect(),b.top=c.top,b.bottom=c.bottom||c.top+c.height,b.left=c.left,b.width=d.offsetWidth,b.height=d.offsetHeight);return b};h.Util.OffsetBounds=function(d){var c=d.offsetParent?h.Util.OffsetBounds(d.offsetParent):{top:0,left:0};return{top:d.offsetTop+c.top,bottom:d.offsetTop+d.offsetHeight+c.top,left:d.offsetLeft+c.left,width:d.offsetWidth,height:d.offsetHeight}};
h.Util.getCSS=function(d,c,b){void 0!==d&&(L=p.defaultView.getComputedStyle(d,null));var g=L[c];if(/^background(Size|Position)$/.test(c)){a:{g=(g||"").split(",");g=g[b||0]||g[0]||"auto";g=h.Util.trimText(g).split(" ");if("backgroundSize"!==c||g[0]&&!g[0].match(/cover|contain|auto/)){g[0]=-1===g[0].indexOf("%")?r(d,c+"X",g[0]):g[0];if(g[1]===q)if("backgroundSize"===c){g[1]="auto";d=g;break a}else g[1]=g[0];g[1]=-1===g[1].indexOf("%")?r(d,c+"Y",g[1]):g[1]}d=g}return d}return/border(Top|Bottom)(Left|Right)Radius/.test(c)?
(d=g.split(" "),1>=d.length&&(d[1]=d[0]),d.map(A)):g};h.Util.resizeBounds=function(d,c,b,g,k){d/=c;k&&"auto"!==k?b/g<d^"contain"===k?(b=g,k=g*d):(k=b,b/=d):(k=b,b=g);return{width:k,height:b}};h.Util.BackgroundPosition=function(d,c,b,g,k){d=F("backgroundPosition",d,c,b,g,k);return{left:d[0],top:d[1]}};h.Util.BackgroundSize=function(d,c,b,g){d=F("backgroundSize",d,c,b,g);return{width:d[0],height:d[1]}};h.Util.Extend=function(d,c){for(var b in d)d.hasOwnProperty(b)&&(c[b]=d[b]);return c};h.Util.Children=
function(d){var c;try{var b;if(d.nodeName&&"IFRAME"===d.nodeName.toUpperCase())b=d.contentDocument||d.contentWindow.document;else{var g=d.childNodes;d=[];if(null!==g){var k=d.length,n=0;if("number"===typeof g.length)for(var a=g.length;n<a;n++)d[k++]=g[n];else for(;g[n]!==q;)d[k++]=g[n++];d.length=k}b=d}c=b}catch(v){h.Util.log("html2canvas.Util.Children failed with exception: "+v.message),c=[]}return c};h.Util.isTransparent=function(d){return"transparent"===d||"rgba(0, 0, 0, 0)"===d};h.Util.Font=function(){var d=
{};return function(c,b,g){if(d[c+"-"+b]!==q)return d[c+"-"+b];var k=g.createElement("div"),n=g.createElement("img"),a=g.createElement("span"),v;k.style.visibility="hidden";k.style.fontFamily=c;k.style.fontSize=b;k.style.margin=0;k.style.padding=0;g.body.appendChild(k);n.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=";n.width=1;n.height=1;n.style.margin=0;n.style.padding=0;n.style.verticalAlign="baseline";a.style.fontFamily=c;a.style.fontSize=b;a.style.margin=0;a.style.padding=
0;a.appendChild(g.createTextNode("Hidden Text"));k.appendChild(a);k.appendChild(n);v=n.offsetTop-a.offsetTop+1;k.removeChild(a);k.appendChild(g.createTextNode("Hidden Text"));k.style.lineHeight="normal";n.style.verticalAlign="super";n={baseline:v,lineWidth:1,middle:n.offsetTop-k.offsetTop+1};d[c+"-"+b]=n;g.body.removeChild(k);return n}}();(function(){function d(d){return function(b){try{d.addColorStop(b.stop,b.color)}catch(a){c.log(["failed to add color stop: ",a,"; tried to add: ",b])}}}var c=h.Util,
b={};h.Generate=b;var g=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,
/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];b.parseGradient=function(d,b){var a,c,f=g.length,e,h,p,l;for(c=0;c<f&&!(e=d.match(g[c]));c+=1);if(e)switch(e[1]){case "-webkit-linear-gradient":case "-o-linear-gradient":a={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]};if(f=e[2].match(/\w+/g))for(h=f.length,c=0;c<h;c+=1)switch(f[c]){case "top":a.y0=0;a.y1=b.height;break;case "right":a.x0=b.width;a.x1=0;break;case "bottom":a.y0=b.height;
a.y1=0;break;case "left":a.x0=0,a.x1=b.width}null===a.x0&&null===a.x1&&(a.x0=a.x1=b.width/2);null===a.y0&&null===a.y1&&(a.y0=a.y1=b.height/2);if(f=e[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(h=f.length,p=1/Math.max(h-1,1),c=0;c<h;c+=1)l=f[c].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),l[2]?(e=parseFloat(l[2]),e="%"===l[3]?e/100:e/b.width):e=c*p,a.colorStops.push({color:l[1],stop:e});break;case "-webkit-gradient":a=
{type:"radial"===e[2]?"circle":e[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]};if(f=e[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/))a.x0=f[1]*b.width/100,a.y0=f[2]*b.height/100,a.x1=f[3]*b.width/100,a.y1=f[4]*b.height/100;if(f=e[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(h=f.length,c=0;c<h;c+=1)l=f[c].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),
e=parseFloat(l[2]),"from"===l[1]&&(e=0),"to"===l[1]&&(e=1),a.colorStops.push({color:l[3],stop:e});break;case "-moz-linear-gradient":a={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]};if(f=e[2].match(/(\d{1,3})%?\s(\d{1,3})%?/))a.x0=f[1]*b.width/100,a.y0=f[2]*b.height/100,a.x1=b.width-a.x0,a.y1=b.height-a.y0;if(f=e[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(h=f.length,p=1/Math.max(h-1,1),c=0;c<h;c+=1)l=f[c].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),
l[2]?(e=parseFloat(l[2]),l[3]&&(e/=100)):e=c*p,a.colorStops.push({color:l[1],stop:e});break;case "-webkit-radial-gradient":case "-moz-radial-gradient":case "-o-radial-gradient":a={type:"circle",x0:0,y0:0,x1:b.width,y1:b.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]};if(f=e[2].match(/(\d{1,3})%?\s(\d{1,3})%?/))a.cx=f[1]*b.width/100,a.cy=f[2]*b.height/100;f=e[3].match(/\w+/);l=e[4].match(/[a-z\-]*/);if(f&&l)switch(l[0]){case "farthest-corner":case "cover":case "":c=Math.sqrt(Math.pow(a.cx,2)+Math.pow(a.cy,
2));f=Math.sqrt(Math.pow(a.cx,2)+Math.pow(a.y1-a.cy,2));h=Math.sqrt(Math.pow(a.x1-a.cx,2)+Math.pow(a.y1-a.cy,2));l=Math.sqrt(Math.pow(a.x1-a.cx,2)+Math.pow(a.cy,2));a.rx=a.ry=Math.max(c,f,h,l);break;case "closest-corner":c=Math.sqrt(Math.pow(a.cx,2)+Math.pow(a.cy,2));f=Math.sqrt(Math.pow(a.cx,2)+Math.pow(a.y1-a.cy,2));h=Math.sqrt(Math.pow(a.x1-a.cx,2)+Math.pow(a.y1-a.cy,2));l=Math.sqrt(Math.pow(a.x1-a.cx,2)+Math.pow(a.cy,2));a.rx=a.ry=Math.min(c,f,h,l);break;case "farthest-side":"circle"===f[0]?a.rx=
a.ry=Math.max(a.cx,a.cy,a.x1-a.cx,a.y1-a.cy):(a.type=f[0],a.rx=Math.max(a.cx,a.x1-a.cx),a.ry=Math.max(a.cy,a.y1-a.cy));break;case "closest-side":case "contain":"circle"===f[0]?a.rx=a.ry=Math.min(a.cx,a.cy,a.x1-a.cx,a.y1-a.cy):(a.type=f[0],a.rx=Math.min(a.cx,a.x1-a.cx),a.ry=Math.min(a.cy,a.y1-a.cy))}if(f=e[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(h=f.length,p=1/Math.max(h-1,1),c=0;c<h;c+=1)l=f[c].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),
l[2]?(e=parseFloat(l[2]),e="%"===l[3]?e/100:e/b.width):e=c*p,a.colorStops.push({color:l[1],stop:e})}return a};b.Gradient=function(c,b){if(0!==b.width&&0!==b.height){var a=p.createElement("canvas"),e=a.getContext("2d"),f,g;a.width=b.width;a.height=b.height;if(f=h.Generate.parseGradient(c,b))switch(f.type){case "linear":g=e.createLinearGradient(f.x0,f.y0,f.x1,f.y1);f.colorStops.forEach(d(g));e.fillStyle=g;e.fillRect(0,0,b.width,b.height);break;case "circle":g=e.createRadialGradient(f.cx,f.cy,0,f.cx,
f.cy,f.rx);f.colorStops.forEach(d(g));e.fillStyle=g;e.fillRect(0,0,b.width,b.height);break;case "ellipse":var q=p.createElement("canvas"),r=q.getContext("2d");g=Math.max(f.rx,f.ry);var l=2*g;q.width=q.height=l;g=r.createRadialGradient(f.rx,f.ry,0,f.rx,f.ry,g);f.colorStops.forEach(d(g));r.fillStyle=g;r.fillRect(0,0,l,l);e.fillStyle=f.colorStops[f.colorStops.length-1].color;e.fillRect(0,0,a.width,a.height);e.drawImage(q,f.cx-f.rx,f.cy-f.ry,2*f.rx,2*f.ry)}return a}};b.ListAlpha=function(b){var c="",
a;do a=b%26,c=String.fromCharCode(a+64)+c,b/=26;while(26<26*b);return c};b.ListRoman=function(b){var c="M CM D CD C XC L XL X IX V IV I".split(" "),a=[1E3,900,500,400,100,90,50,40,10,9,5,4,1],d="",f,e=c.length;if(0>=b||4E3<=b)return b;for(f=0;f<e;f+=1)for(;b>=a[f];)b-=a[f],d+=c[f];return d}})();h.Parse=function(d,c){function b(m,s){var b=parseInt(u(m,s),10);return isNaN(b)?0:b}function g(m,s,b,c,a,d){"transparent"!==d&&(m.setVariable("fillStyle",d),m.fillRect(s,b,c,a))}function k(m,s,b){if(0<m.length)return s+
b.toUpperCase()}function n(m,s){switch(s){case "lowercase":return m.toLowerCase();case "capitalize":return m.replace(/(^|\s|:|-|\(|\))([a-z])/g,k);case "uppercase":return m.toUpperCase();default:return m}}function a(m){return/^(normal|none|0px)$/.test(m)}function v(m,s,b,c){var a=u(s,"fontWeight"),d=u(s,"fontFamily"),f=u(s,"fontSize"),e=w.parseTextShadows(u(s,"textShadow"));switch(parseInt(a,10)){case 401:a="bold";break;case 400:a="normal"}m.setVariable("fillStyle",c);m.setVariable("font",[u(s,"fontStyle"),
u(s,"fontVariant"),a,f,d].join(" "));m.setVariable("textAlign","left");e.length&&(m.setVariable("shadowColor",e[0].color),m.setVariable("shadowOffsetX",e[0].offsetX),m.setVariable("shadowOffsetY",e[0].offsetY),m.setVariable("shadowBlur",e[0].blur));if("none"!==b)return w.Font(d,f,y)}function f(m,s,b){var d=b.ctx,f=u(m,"color"),e=u(m,"textDecoration"),k=u(m,"textAlign"),h,l,p=s,C=0;0<w.trimText(s.nodeValue).length&&(s.nodeValue=n(s.nodeValue,u(m,"textTransform")),k=k.replace(["-webkit-auto"],["auto"]),
l=!c.letterRendering&&/^(left|right|justify|auto)$/.test(k)&&a(u(m,"letterSpacing"))?s.nodeValue.split(/(\b| )/):s.nodeValue.split(""),h=v(d,m,e,f),c.chinese&&l.forEach(function(m,s){/.*[\u4E00-\u9FA5].*$/.test(m)&&(m=m.split(""),m.unshift(s,1),l.splice.apply(l,m))}),l.forEach(function(m,s){var a,c=s<l.length-1;a=b.transform.matrix;var k;if(Y.rangeBounds&&!a){if("none"!==e||0!==w.trimText(m).length)a=p,c=C,k=y.createRange(),k.setStart(a,c),k.setEnd(a,c+m.length),k=k.getBoundingClientRect();C+=m.length}else if(p&&
"string"===typeof p.nodeValue){var c=c?p.splitText(m.length):null,n=p;k=n.parentNode;var q=y.createElement("wrapper"),X=n.cloneNode(!0);q.appendChild(n.cloneNode(!0));k.replaceChild(q,n);a=a?w.OffsetBounds(q):w.Bounds(q);k.replaceChild(X,q);k=a;p=c}if(a=k)switch(c=a.left,k=a.bottom,null!==m&&0<w.trimText(m).length&&d.fillText(m,c,k),e){case "underline":g(d,a.left,Math.round(a.top+h.baseline+h.lineWidth),a.width,1,f);break;case "overline":g(d,a.left,Math.round(a.top),a.width,1,f);break;case "line-through":g(d,
a.left,Math.ceil(a.top+h.middle+h.lineWidth),a.width,1,f)}}))}function r(m,s,a){var b;s=s.ctx;var c=u(m,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(c)){var d;d=-1;var f=1,e=m.parentNode.childNodes;if(m.parentNode){for(;e[++d]!==m;)1===e[d].nodeType&&f++;d=f}else d=-1;switch(c){case "decimal":b=d;break;case "decimal-leading-zero":b=1===d.toString().length?"0"+d.toString():d.toString();break;case "upper-roman":b=
h.Generate.ListRoman(d);break;case "lower-roman":b=h.Generate.ListRoman(d).toLowerCase();break;case "lower-alpha":b=h.Generate.ListAlpha(d).toLowerCase();break;case "upper-alpha":b=h.Generate.ListAlpha(d)}b+=". ";d=y.createElement("boundelement");d.style.display="inline";f=m.style.listStyleType;m.style.listStyleType="none";d.appendChild(y.createTextNode(b));m.insertBefore(d,m.firstChild);c=w.Bounds(d);m.removeChild(d);m.style.listStyleType=f;v(s,m,"none",u(m,"color"));"inside"===u(m,"listStylePosition")&&
(s.setVariable("textAlign","left"),m=a.left,a=c.bottom,null!==b&&0<w.trimText(b).length&&s.fillText(b,m,a))}}function z(m){return(m=d[m])&&!0===m.succeeded?m.img:!1}function E(m,s){var b=Math.max(m.left,s.left),a=Math.max(m.top,s.top),d=Math.min(m.left+m.width,s.left+s.width),c=Math.min(m.top+m.height,s.top+s.height);return{left:b,top:a,width:d-b,height:c-a}}function l(m,s,a,d,c){var f=b(s,"paddingLeft"),e=b(s,"paddingTop"),g=b(s,"paddingRight");s=b(s,"paddingBottom");t(m,a,0,0,a.width,a.height,d.left+
f+c[3].width,d.top+e+c[0].width,d.width-(c[1].width+c[3].width+f+g),d.height-(c[0].width+c[2].width+e+s))}function A(m){return["Top","Right","Bottom","Left"].map(function(a){return{width:b(m,"border"+a+"Width"),color:u(m,"border"+a+"Color")}})}function H(m){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(a){return u(m,"border"+a+"Radius")})}function D(m,a,b,c){var d=function(m,a,b){return{x:m.x+(a.x-m.x)*b,y:m.y+(a.y-m.y)*b}};return{start:m,startControl:a,endControl:b,end:c,subdivide:function(f){var e=
d(m,a,f),g=d(a,b,f),k=d(b,c,f),h=d(e,g,f),g=d(g,k,f);f=d(h,g,f);return[D(m,e,h,f),D(f,g,k,c)]},curveTo:function(m){m.push(["bezierCurve",a.x,a.y,b.x,b.y,c.x,c.y])},curveToReversed:function(c){c.push(["bezierCurve",b.x,b.y,a.x,a.y,m.x,m.y])}}}function G(m,a,b,c,d,f,e){0<a[0]||0<a[1]?(m.push(["line",c[0].start.x,c[0].start.y]),c[0].curveTo(m),c[1].curveTo(m)):m.push(["line",f,e]);(0<b[0]||0<b[1])&&m.push(["line",d[0].start.x,d[0].start.y])}function B(m,a,b,c,d,f,e){var g=[];0<a[0]||0<a[1]?(g.push(["line",
c[1].start.x,c[1].start.y]),c[1].curveTo(g)):g.push(["line",m.c1[0],m.c1[1]]);0<b[0]||0<b[1]?(g.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(g),g.push(["line",e[0].end.x,e[0].end.y]),e[0].curveToReversed(g)):(g.push(["line",m.c2[0],m.c2[1]]),g.push(["line",m.c3[0],m.c3[1]]));0<a[0]||0<a[1]?(g.push(["line",d[1].end.x,d[1].end.y]),d[1].curveToReversed(g)):g.push(["line",m.c4[0],m.c4[1]]);return g}function F(m,a,b){var c,d,f,e,g,k,h,l,n=a.left,p=a.top,q=a.width,C=a.height,t,v,r,J,x=H(m);l=a.left;
t=a.top;k=a.width;h=a.height;d=x[0][0];f=x[0][1];e=x[1][0];g=x[1][1];var w=x[2][0],D=x[2][1];v=x[3][0];r=x[3][1];var O=k-e,z=h-D,E=k-w,y=h-r;c=I(l,t,d,f).topLeft.subdivide(.5);d=I(l+b[3].width,t+b[0].width,Math.max(0,d-b[3].width),Math.max(0,f-b[0].width)).topLeft.subdivide(.5);f=I(l+O,t,e,g).topRight.subdivide(.5);e=I(l+Math.min(O,k+b[3].width),t+b[0].width,O>k+b[3].width?0:e-b[3].width,g-b[0].width).topRight.subdivide(.5);g=I(l+E,t+z,w,D).bottomRight.subdivide(.5);k=I(l+Math.min(E,k+b[3].width),
t+Math.min(z,h+b[0].width),Math.max(0,w-b[1].width),Math.max(0,D-b[2].width)).bottomRight.subdivide(.5);h=I(l,t+y,v,r).bottomLeft.subdivide(.5);l=I(l+b[3].width,t+y,Math.max(0,v-b[3].width),Math.max(0,r-b[2].width)).bottomLeft.subdivide(.5);t=[];switch(u(m,"backgroundClip")){case "content-box":case "padding-box":G(t,x[0],x[1],d,e,a.left+b[3].width,a.top+b[0].width);G(t,x[1],x[2],e,k,a.left+a.width-b[1].width,a.top+b[0].width);G(t,x[2],x[3],k,l,a.left+a.width-b[1].width,a.top+a.height-b[2].width);
G(t,x[3],x[0],l,d,a.left+b[3].width,a.top+a.height-b[2].width);break;default:G(t,x[0],x[1],c,f,a.left,a.top),G(t,x[1],x[2],f,g,a.left+a.width,a.top),G(t,x[2],x[3],g,h,a.left+a.width,a.top+a.height),G(t,x[3],x[0],h,c,a.left,a.top+a.height)}y={clip:t,borders:[]};for(m=0;4>m;m++)if(0<b[m].width){a=n;t=p;v=q;r=C-b[2].width;switch(m){case 0:r=b[0].width;J=B({c1:[a,t],c2:[a+v,t],c3:[a+v-b[1].width,t+r],c4:[a+b[3].width,t+r]},x[0],x[1],c,d,f,e);break;case 1:a=n+q-b[1].width;v=b[1].width;J=B({c1:[a+v,t],
c2:[a+v,t+r+b[2].width],c3:[a,t+r],c4:[a,t+b[0].width]},x[1],x[2],f,e,g,k);break;case 2:t=t+C-b[2].width;r=b[2].width;J=B({c1:[a+v,t+r],c2:[a,t+r],c3:[a+b[3].width,t],c4:[a+v-b[3].width,t]},x[2],x[3],g,k,h,l);break;case 3:v=b[3].width,J=B({c1:[a,t+r+b[2].width],c2:[a,t],c3:[a+v,t+b[0].width],c4:[a+v,t+r]},x[3],x[0],h,l,c,d)}y.borders.push({args:J,color:b[m].color})}return y}function K(a,b){var c=a.drawShape();b.forEach(function(a,b){c[0===b?"moveTo":a[0]+"To"].apply(null,a.slice(1))});return c}function C(a,
b,c){var d=y.createElement("valuewrap");"lineHeight textAlign fontFamily color fontSize paddingLeft paddingTop width height border borderLeftWidth borderTopWidth".split(" ").forEach(function(b){try{d.style[b]=u(a,b)}catch(c){w.log("html2canvas: Parse: Exception caught in renderFormValue: "+c.message)}});d.style.borderColor="black";d.style.borderStyle="solid";d.style.display="block";d.style.position="absolute";if(/^(submit|reset|button|text|password)$/.test(a.type)||"SELECT"===a.nodeName)d.style.lineHeight=
u(a,"height");d.style.top=b.top+"px";d.style.left=b.left+"px";b="SELECT"===a.nodeName?(a.options[a.selectedIndex]||0).text:a.value;b||(b=a.placeholder);b=y.createTextNode(b);d.appendChild(b);M.appendChild(d);f(a,b,c);M.removeChild(d)}function t(a){a.drawImage.apply(a,Array.prototype.slice.call(arguments,1))}function J(a,b){var d=e.getComputedStyle(a,b);if(d&&d.content&&"none"!==d.content&&"-moz-alt-content"!==d.content&&"none"!==d.display){var c=d.content+"",f=c.substr(0,1);f===c.substr(c.length-
1)&&f.match(/'|"/)&&(c=c.substr(1,c.length-2));var f="url"===c.substr(0,3),g=p.createElement(f?"img":"span");g.className="___html2canvas___pseudoelement-before ___html2canvas___pseudoelement-after";Object.keys(d).filter(Z).forEach(function(a){try{g.style[a]=d[a]}catch(b){w.log(["Tried to assign readonly property ",a,"Error:",b])}});f?g.src=w.parseBackgroundImage(c)[0].args[0]:g.innerHTML=c;return g}}function Z(a){return isNaN(e.parseInt(a,10))}function aa(a,b){var d=J(a,":before"),c=J(a,":after");
if(d||c)d&&(a.className+=" ___html2canvas___pseudoelement-before",a.parentNode.insertBefore(d,a),P(d,b,!0),a.parentNode.removeChild(d),a.className=a.className.replace("___html2canvas___pseudoelement-before","").trim()),c&&(a.className+=" ___html2canvas___pseudoelement-after",a.appendChild(c),P(c,b,!0),a.removeChild(c),a.className=a.className.replace("___html2canvas___pseudoelement-after","").trim())}function S(a,b,d,c){var f=Math.round(c.left+d.left);d=Math.round(c.top+d.top);a.createPattern(b);a.translate(f,
d);a.fill();a.translate(-f,-d)}function Q(a,b,d,c,f,e,g,k){var h=[];h.push(["line",Math.round(f),Math.round(e)]);h.push(["line",Math.round(f+g),Math.round(e)]);h.push(["line",Math.round(f+g),Math.round(k+e)]);h.push(["line",Math.round(f),Math.round(k+e)]);K(a,h);a.save();a.clip();S(a,b,d,c);a.restore()}function L(a,b,d){for(var c=u(a,"backgroundImage"),f=w.parseBackgroundImage(c),e,g=f.length;g--;)if(c=f[g],c.args&&0!==c.args.length)if(e=z("url"===c.method?c.args[0]:c.value)){var k=a,c=b,h=d,l=e;
e=g;var n=w.BackgroundSize(k,c,l,e),p=w.BackgroundPosition(k,c,l,e,n),k=u(k,"backgroundRepeat").split(",").map(w.trimText);if(l.width!==n.width||l.height!==n.height){var q=void 0,C=y.createElement("canvas");C.width=n.width;C.height=n.height;q=C.getContext("2d");t(q,l,0,0,l.width,l.height,0,0,n.width,n.height);l=C}k=k[e]||k[0];switch(k){case "repeat-x":Q(h,l,p,c,c.left,c.top+p.top,99999,l.height);break;case "repeat-y":Q(h,l,p,c,c.left+p.left,c.top,l.width,99999);break;case "no-repeat":Q(h,l,p,c,c.left+
p.left,c.top+p.top,l.width,l.height);break;default:S(h,l,p,{top:c.top,left:c.left,width:l.width,height:l.height})}}else w.log("html2canvas: Error loading background:",c)}function ba(a){return a.replace("px","")}function ca(a,b){var c=u(a,"transform")||u(a,"-webkit-transform")||u(a,"-moz-transform")||u(a,"-ms-transform")||u(a,"-o-transform"),d=u(a,"transform-origin")||u(a,"-webkit-transform-origin")||u(a,"-moz-transform-origin")||u(a,"-ms-transform-origin")||u(a,"-o-transform-origin")||"0px 0px",d=
d.split(" ").map(ba).map(w.asFloat),f;if(c&&"none"!==c&&(c=c.match(da)))switch(c[1]){case "matrix":f=c[2].split(",").map(w.trimText).map(w.asFloat)}return{origin:d,matrix:f}}function ea(a,b,d,f){var e=W(b?d.width:Math.max(Math.max(y.body.scrollWidth,y.documentElement.scrollWidth),Math.max(y.body.offsetWidth,y.documentElement.offsetWidth),Math.max(y.body.clientWidth,y.documentElement.clientWidth)),b?d.height:Math.max(Math.max(y.body.scrollHeight,y.documentElement.scrollHeight),Math.max(y.body.offsetHeight,
y.documentElement.offsetHeight),Math.max(y.body.clientHeight,y.documentElement.clientHeight))),g;g=e.setVariable("globalAlpha",u(a,"opacity")*(b?b.opacity:1));f={ctx:e,opacity:g,cssPosition:u(a,"position"),borders:A(a),transform:f,clip:b&&b.clip?w.Extend({},b.clip):null};var k=(g="static"!==f.cssPosition)?u(a,"zIndex"):"auto",l=u(a,"opacity"),h="none"!==u(a,"cssFloat");f.zIndex=e={zindex:k,children:[]};e.isPositioned=g;e.isFloated=h;e.opacity=l;e.ownStacking="auto"!==k||1>l;b&&b.zIndex.children.push(f);
!0===c.useOverflow&&!0===/(hidden|scroll|auto)/.test(u(a,"overflow"))&&!1===/(BODY)/i.test(a.nodeName)&&(f.clip=f.clip?E(f.clip,d):d);return f}function fa(a,b,c){a={left:b.left+a[3].width,top:b.top+a[0].width,width:b.width-(a[1].width+a[3].width),height:b.height-(a[0].width+a[2].width)};c&&(a=E(a,c));return a}function ga(a,b){var c=b.matrix?w.OffsetBounds(a):w.Bounds(a);b.origin[0]+=c.left;b.origin[1]+=c.top;return c}function T(a,b,c,d){var f=ca(a,b),e=ga(a,f),k;b=ea(a,b,e,f);var f=b.borders,h=b.ctx,
n=fa(f,e,b.clip),t=F(a,e,f),p=U.test(a.nodeName)?"#efefef":u(a,"backgroundColor");K(h,t.clip);h.save();h.clip();0<n.height&&0<n.width&&!d?(g(h,e.left,e.top,e.width,e.height,p),L(a,n,h)):d&&(b.backgroundColor=p);h.restore();t.borders.forEach(function(a){var b=a.args;a=a.color;"transparent"!==a&&(h.setVariable("fillStyle",a),K(h,b),h.fill())});c||aa(a,b);switch(a.nodeName){case "IMG":(k=z(a.getAttribute("src")))?l(h,a,k,e,f):w.log("html2canvas: Error loading <img>:"+a.getAttribute("src"));break;case "INPUT":/^(text|url|email|submit|button|reset)$/.test(a.type)&&
0<(a.value||a.placeholder||"").length&&C(a,e,b);break;case "TEXTAREA":0<(a.value||a.placeholder||"").length&&C(a,e,b);break;case "SELECT":0<(a.options||a.placeholder||"").length&&C(a,e,b);break;case "LI":r(a,b,n);break;case "CANVAS":l(h,a,a,e,f)}return b}function P(a,b,c){"none"===u(a,"display")||"hidden"===u(a,"visibility")||a.hasAttribute("data-html2canvas-ignore")||(b=T(a,b,c,!1)||b,U.test(a.nodeName)||V(a,b,c))}function V(a,b,c){w.Children(a).forEach(function(d){d.nodeType===d.ELEMENT_NODE?P(d,
b,c):d.nodeType===d.TEXT_NODE&&f(a,d,b)})}e.scroll(0,0);var N=c.elements===q?p.body:c.elements[0],y=N.ownerDocument,w=h.Util,Y=w.Support(c,y),U=new RegExp("("+c.ignoreElements+")"),M=y.body,u=w.getCSS,R=y.createElement("style");R.innerHTML='.___html2canvas___pseudoelement-before:before { content: "" !important; display: none !important; }.___html2canvas___pseudoelement-after:after { content: "" !important; display: none !important; }';M.appendChild(R);d=d||{};var I=function(a){return function(b,c,
d,f){var e=d*a,g=f*a;d=b+d;f=c+f;return{topLeft:D({x:b,y:f},{x:b,y:f-g},{x:d-e,y:c},{x:d,y:c}),topRight:D({x:b,y:c},{x:b+e,y:c},{x:d,y:f-g},{x:d,y:f}),bottomRight:D({x:d,y:c},{x:d,y:c+g},{x:b+e,y:f},{x:b,y:f}),bottomLeft:D({x:d,y:f},{x:d-e,y:f},{x:b,y:c+g},{x:b,y:c})}}}(4*((Math.sqrt(2)-1)/3)),da=/(matrix)\((.+)\)/;return function(){var a=u(p.documentElement,"backgroundColor"),b=w.isTransparent(a)&&N===p.body,c=T(N,null,!1,b);V(N,c);b&&(a=c.backgroundColor);M.removeChild(R);return{backgroundColor:a,
stack:c}}()};h.Preload=function(d){function c(){z.log("html2canvas: start: images: "+f.numLoaded+" / "+f.numTotal+" (failed: "+f.numFailed+")");!f.firstRun&&f.numLoaded>=f.numTotal&&(z.log("Finished loading images: # "+f.numTotal+" (failed: "+f.numFailed+")"),"function"===typeof d.complete&&d.complete(f))}function b(a,b,g){var k,h=d.proxy,l;B.href=a;a=B.href;k="html2canvas_"+A++;g.callbackname=k;h=-1<h.indexOf("?")?h+"&":h+"?";h+="url="+encodeURIComponent(a)+"&callback="+k;l=H.createElement("script");
e[k]=function(a){"error:"===a.substring(0,6)?(g.succeeded=!1,f.numLoaded++,f.numFailed++,c()):(v(b,g),b.src=a);e[k]=q;try{delete e[k]}catch(d){}l.parentNode.removeChild(l);l=null;delete g.script;delete g.callbackname};l.setAttribute("type","text/javascript");l.setAttribute("src",h);g.script=l;e.document.body.appendChild(l)}function g(a,b){var c=e.getComputedStyle(a,b),d=c.content;"url"===d.substr(0,3)&&E.loadImage(h.Util.parseBackgroundImage(d)[0].args[0]);n(c.backgroundImage,a)}function k(a){return a&&
a.method&&a.args&&0<a.args.length}function n(a,b){var d;h.Util.parseBackgroundImage(a).filter(k).forEach(function(a){if("url"===a.method)E.loadImage(a.args[0]);else if(a.method.match(/\-?gradient$/)){d===q&&(d=h.Util.Bounds(b));a=a.value;var e=h.Generate.Gradient(a,d);e!==q&&(f[a]={img:e,succeeded:!0},f.numTotal++,f.numLoaded++,c())}})}function a(b){var c=!1;try{z.Children(b).forEach(a)}catch(d){}try{c=b.nodeType}catch(f){c=!1,z.log("html2canvas: failed to access some element's nodeType - Exception: "+
f.message)}if(1===c||c===q){g(b,":before");g(b,":after");try{n(z.getCSS(b,"backgroundImage"),b)}catch(e){z.log("html2canvas: failed to get background-image - Exception: "+e.message)}n(b)}}function v(a,g){a.onload=function(){g.timer!==q&&e.clearTimeout(g.timer);f.numLoaded++;g.succeeded=!0;a.onerror=a.onload=null;c()};a.onerror=function(){if("anonymous"===a.crossOrigin&&(e.clearTimeout(g.timer),d.proxy)){var k=a.src;a=new Image;g.img=a;a.src=k;b(a.src,a,g);return}f.numLoaded++;f.numFailed++;g.succeeded=
!1;a.onerror=a.onload=null;c()}}var f={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},r,z=h.Util,E,l,A=0;l=d.elements[0]||p.body;var H=l.ownerDocument,D=l.getElementsByTagName("img"),G=D.length,B=H.createElement("a"),F=function(a){return a.crossOrigin!==q}(new Image),K;B.href=e.location.href;r=B.protocol+B.host;E={loadImage:function(a){var c,e;a&&f[a]===q&&(c=new Image,a.match(/data:image\/.*;base64,/i)?(c.src=a.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,""),e=f[a]={img:c},f.numTotal++,v(c,e)):(B.href=
a,B.href=B.href,B.protocol+B.host===r||!0===d.allowTaint?(e=f[a]={img:c},f.numTotal++,v(c,e),c.src=a):F&&!d.allowTaint&&d.useCORS?(c.crossOrigin="anonymous",e=f[a]={img:c},f.numTotal++,v(c,e),c.src=a):d.proxy&&(e=f[a]={img:c},f.numTotal++,b(a,c,e))))},cleanupDOM:function(a){var b,g;if(!f.cleanupDone){a&&"string"===typeof a?z.log("html2canvas: Cleanup because: "+a):z.log("html2canvas: Cleanup after timeout: "+d.timeout+" ms.");for(g in f)if(f.hasOwnProperty(g)&&(b=f[g],"object"===typeof b&&b.callbackname&&
b.succeeded===q)){e[b.callbackname]=q;try{delete e[b.callbackname]}catch(k){}b.script&&b.script.parentNode&&(b.script.setAttribute("src","about:blank"),b.script.parentNode.removeChild(b.script));f.numLoaded++;f.numFailed++;z.log("html2canvas: Cleaned up failed img: '"+g+"' Steps: "+f.numLoaded+" / "+f.numTotal)}e.stop!==q?e.stop():p.execCommand!==q&&p.execCommand("Stop",!1);p.close!==q&&p.close();f.cleanupDone=!0;a&&"string"===typeof a||c()}},renderingDone:function(){K&&e.clearTimeout(K)}};0<d.timeout&&
(K=e.setTimeout(E.cleanupDOM,d.timeout));z.log("html2canvas: Preload starts: finding background-images");f.firstRun=!0;a(l);z.log("html2canvas: Preload: Finding images");for(l=0;l<G;l+=1)E.loadImage(D[l].getAttribute("src"));f.firstRun=!1;z.log("html2canvas: Preload: Done.");f.numTotal===f.numLoaded&&c();return E};h.Renderer=function(d,c){return function(b){if("string"===typeof c.renderer&&h.Renderer[b]!==q)b=h.Renderer[b](c);else if("function"===typeof b)b=b(c);else throw Error("Unknown renderer");
if("function"!==typeof b)throw Error("Invalid renderer defined");return b}(c.renderer)(d,c,p,function(b){function c(b){Object.keys(b).sort().forEach(function(a){var e=[],f=[],h=[],p=[];b[a].forEach(function(a){a.node.zIndex.isPositioned||1>a.node.zIndex.opacity?h.push(a):a.node.zIndex.isFloated?f.push(a):e.push(a)});(function l(a){a.forEach(function(a){p.push(a);a.children&&l(a.children)})})(e.concat(f,h));p.forEach(function(a){a.context?c(a.context):d.push(a.node)})})}var d=[];b=function(b){function a(b,
c,d){var e="auto"===c.zIndex.zindex?0:Number(c.zIndex.zindex),g=b,k=c.zIndex.isPositioned,h=c.zIndex.isFloated,p={node:c},n=d;if(c.zIndex.ownStacking)g=p.context={"!":[{node:c,children:[]}]},n=q;else if(k||h)n=p.children=[];0===e&&d?d.push(p):(b[e]||(b[e]=[]),b[e].push(p));c.zIndex.children.forEach(function(b){a(g,b,n)})}var c={};a(c,b);return c}(b);c(b);return d}(d.stack),h)};h.Util.Support=function(d,c){function b(){var b=new Image,d=c.createElement("canvas"),e=d.getContext===q?!1:d.getContext("2d");
if(!1===e)return!1;d.width=d.height=10;b.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'><foreignObject width='10' height='10'><div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>sup</div></foreignObject></svg>";try{e.drawImage(b,0,0),d.toDataURL()}catch(a){return!1}h.Util.log("html2canvas: Parse: SVG powered rendering available");return!0}return{rangeBounds:function(){var b,d,e=!1;c.createRange&&(b=c.createRange(),b.getBoundingClientRect&&
(d=c.createElement("boundtest"),d.style.height="123px",d.style.display="block",c.body.appendChild(d),b.selectNode(d),b=b.getBoundingClientRect(),b=b.height,123===b&&(e=!0),c.body.removeChild(d)));return e}(),svgRendering:d.svgRendering&&b()}};e.html2canvas=function(d,c){d=d.length?d:[d];var b,g,k={logging:!1,elements:d,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,
taintTest:!0,renderer:"Canvas"},k=h.Util.Extend(c,k);h.logging=k.logging;k.complete=function(c){if("function"!==typeof k.onpreloaded||!1!==k.onpreloaded(c))if(b=h.Parse(c,k),"function"!==typeof k.onparsed||!1!==k.onparsed(b))if(g=h.Renderer(b,k),"function"===typeof k.onrendered)k.onrendered(g)};e.setTimeout(function(){h.Preload(k)},0);return{render:function(b,a){return h.Renderer(b,h.Util.Extend(a,k))},parse:function(b,a){return h.Parse(b,h.Util.Extend(a,k))},preload:function(b){return h.Preload(h.Util.Extend(b,
k))},log:h.Util.log}};e.html2canvas.log=h.Util.log;e.html2canvas.Renderer={Canvas:q};h.Renderer.Canvas=function(d){function c(a,b){a.beginPath();b.forEach(function(b){a[b.name].apply(a,b.arguments)});a.closePath()}d=d||{};var b=[],e=p.createElement("canvas"),k=e.getContext("2d"),n=h.Util,a=d.canvas||p.createElement("canvas");return function(h,f,r,z,A){var l=a.getContext("2d"),F,H=h.stack;a.width=a.style.width=f.width||H.ctx.width;a.height=a.style.height=f.height||H.ctx.height;F=l.fillStyle;l.fillStyle=
n.isTransparent(H.backgroundColor)&&f.background!==q?f.background:h.backgroundColor;l.fillRect(0,0,a.width,a.height);l.fillStyle=F;z.forEach(function(a){l.textBaseline="bottom";l.save();a.transform.matrix&&(l.translate(a.transform.origin[0],a.transform.origin[1]),l.transform.apply(l,a.transform.matrix),l.translate(-a.transform.origin[0],-a.transform.origin[1]));a.clip&&(l.beginPath(),l.rect(a.clip.left,a.clip.top,a.clip.width,a.clip.height),l.clip());a.ctx.storage&&a.ctx.storage.forEach(function(a){var f=
l;switch(a.type){case "variable":f[a.name]=a.arguments;break;case "function":switch(a.name){case "createPattern":if(0<a.arguments[0].width&&0<a.arguments[0].height)try{f.fillStyle=f.createPattern(a.arguments[0],"repeat")}catch(h){n.log("html2canvas: Renderer: Error creating pattern",h.message)}break;case "drawShape":c(f,a.arguments);break;case "drawImage":if(0<a.arguments[8]&&0<a.arguments[7]){var q;if(!(q=!d.taintTest)&&(q=d.taintTest))a:{if(-1===b.indexOf(a.arguments[0].src)){k.drawImage(a.arguments[0],
0,0);try{k.getImageData(0,0,1,1)}catch(r){e=p.createElement("canvas");k=e.getContext("2d");q=!1;break a}b.push(a.arguments[0].src)}q=!0}q&&f.drawImage.apply(f,a.arguments)}break;default:f[a.name].apply(f,a.arguments)}}});l.restore()});n.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj");return 1===f.elements.length&&"object"===typeof f.elements[0]&&"BODY"!==f.elements[0].nodeName?(h=A.Util.Bounds(f.elements[0]),r=r.createElement("canvas"),r.width=Math.ceil(h.width),r.height=
Math.ceil(h.height),l=r.getContext("2d"),l.drawImage(a,h.left,h.top,h.width,h.height,0,0,h.width,h.height),a=null,r):a}}})(window,document);
(function(){var e=document.createElement("style");e.innerHTML+=".pagenotes-canvas {";e.innerHTML+="position: absolute; top: 0; left: 0;";e.innerHTML+="}";e.innerHTML+=".pagenotes-toolbar {";e.innerHTML+="position: fixed; left: 0; bottom: 0;";e.innerHTML+="padding: 10px;";e.innerHTML+="background: #ddd;";e.innerHTML+="z-index: 3;";e.innerHTML+="}";e.innerHTML+=".pagenotes-shot {";e.innerHTML+="position: fixed; left: 10px; bottom: 10px;";e.innerHTML+="z-index: 3;";e.innerHTML+="}";document.getElementsByTagName("head")[0].appendChild(e)})();
(function(){window.PagenotesDefaultToolkit=window.PagenotesDefaultToolkit||{};window.PagenotesDefaultToolkit.rectangle_highlight={on:function(e){this.root=e;tool=this;e.canvas.on("mousedown",function(e){tool.openMask(e.offsetX,e.offsetY)}).on("mousemove",function(p){e.temp.rectangle_highlight&&tool.updateMask(p.offsetX,p.offsetY)}).on("mouseup",function(p){e.temp.rectangle_highlight&&tool.saveMask()})},off:function(e){e.canvas.off("mousedown").off("mousemove").off("mouseup")},openMask:function(e,
p){var q=this.root,r=new createjs.Shape;r.x=e;r.y=p;r.graphics.drawRect(0,0,1,1);var A=new createjs.Bitmap(q.screenshot);A.mask=r;q.stage.addChild(A);q.stage.update();q.temp.rectangle_highlight={mask:r,display:A}},updateMask:function(e,p){var q=this.root,r=q.temp.rectangle_highlight,A=e-r.mask.x,F=p-r.mask.y;r.mask.graphics.clear();r.mask.graphics.drawRect(0,0,A,F);q.stage.update()},saveMask:function(){this.root.temp.rectangle_highlight=!1}}})();
(function(){window.PagenotesDefaultToolkit=window.PagenotesDefaultToolkit||{};window.PagenotesDefaultToolkit.save={on:function(e){e=e.canvas.get(0).toDataURL();var p=document.createEvent("Event");this.anchor=$('<a href="'+e+'" download="pagenote-image.jpg"></a>');p.initEvent("click",!0,!0);this.anchor.get(0).dispatchEvent(p)},off:function(e){this.anchor.remove()}}})();
(function(){window.PagenotesDefaultToolkit=window.PagenotesDefaultToolkit||{};window.PagenotesDefaultToolkit.text={on:function(e){this.root=e;var p=this;e.canvas.on("click",function(e){e.preventDefault();p.textField(e.offsetX,e.offsetY)})},off:function(e){e.canvas.off("click")},textField:function(e,p){var q=this,r=this.root;if(!r.temp.text){var A=$("<textarea></textarea>").css({position:"fixed",left:e,top:p}).on("click",function(A){q.saveText($(this).val(),e,p);$(this).remove();r.temp.text=!1}).appendTo($(document.body)).focus();
r.temp.text=A}},saveText:function(e,p,q){var r=this.root;e=new createjs.Text(e,"14px Arial","#ddd");e.x=p;e.y=q;r.stage.addChild(e);r.stage.update()}}})();
(function(){var e=function(e){this.temp={mask:!1};this.masks=[];this.toolkit=e||{}};e.prototype={init:function(){var e=this;$('<button class="pagenotes-shot">Shot</button>').on("click",function(q){q.preventDefault();$(this).remove();e.shot()}).appendTo($(document.body))},shot:function(){var e=this;$(document.body).outerWidth();$(document.body).outerHeight();this.canvas=$('<canvas id="pagenotes-canvas" class="pagenotes-canvas"></canvas>');html2canvas(document.body,{onrendered:function(q){e.canvas.attr("width",
q.width).attr("height",q.height).appendTo($(document.body));e.stage=new createjs.Stage("pagenotes-canvas");e.screenshot=q;var r=new createjs.Bitmap(q);r.filters=[new createjs.BlurFilter(5,5,1)];r.cache(0,0,q.width,q.height);var A=new createjs.Shape;A.graphics.beginFill("rgba(0, 0, 0, 0.6)").drawRect(0,0,q.width,q.height);e.stage.addChild(r);e.stage.addChild(A);e.stage.update();e.selectTool("rectangle_highlight");e.renderToolbar()}})},renderToolbar:function(){var e=this,q=$('<div class="pagenotes-toolbar"></div>').appendTo($(document.body));
$.each(this.toolkit,function(e,p){$('<button data-tool="'+e+'">'+e+"</button>").appendTo(q)});$(".pagenotes-toolbar button").on("click",function(q){q.preventDefault();e.selectTool($(this).data("tool"))})},selectTool:function(e){this.activeTool&&this.toolkit[this.activeTool].off(this);console.log(this.toolkit);console.log(this.tool);this.toolkit[e]&&(this.activeTool=e,this.toolkit[e].on(this))}};(new e(PagenotesDefaultToolkit)).init()})();